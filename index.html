---
layout: main
title: Amethyst Labs
---

<!-- container_4 -->

<!-- PAGE 1 -->

<div id="container_1" class="grid-container animated">

    

</div>

<div id="container_4" class="grid-container animated">

    <div id="main" class="grid-100">

        <p id="tagline" class="">
        <span id="tg_part_1" class="animated flipInX" style="display: inline-block" data-wow-delay="900ms" data-wow-duration="500ms" data-text="AMETHYST LABS">AMETHYST LABS</span>
        <br>
        <span id="tg_part_2" class="animated flipInX" style="display: inline-block" data-wow-delay="1s" data-wow-duration="500ms">Know Thy Proximity</span>
        <br>
        <span id="tg_part_3"></span>
        </p>
        <div id="mainButton">
        <img src="./images/logo2.png" style="width: 100px; height: 100px;" />
        </div>

    </div><!--end secondRow -->


</div>


<!-- PAGE 2 -->

<div id="container_4" class="grid-container animated">

    <div id="logo_screen" class="full_size grid-100">
        <h1 style="" class="animated flipInX" data-wow-delay="500ms" data-wow-duration="500ms">GRID</h1>
    </div>

    <div id="first_screen" class="full_size grid-100 grid-parent">
        <div class="grid-25">
            <div id="content_box3" style="">
                <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                <div id="mainContent" class="flip-container flip" style="">
                    <div class="flipper" style="">
                        <div class="back" style="background-color:#333236;">
                            <div style="position: relative; top: 50%; transform: translateY(-50%); padding: 15px;">
                                <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em; color: #fff;">
                                    No cloud, no servers, not even a scratch to privacy.
                                </p>
                            </div>
                        </div>
                        <div class="front" style="background-color:#f2f2f2;">
                            <div style="position: relative; top: 50%; transform: translateY(-50%);">
                                <span style="font-family: raleway; font-size: 22px; font-weight: 300; letter-spacing: 1px;">
                                    NO
                                    <br>
                                    CENTRAL
                                </span>
                                <span style="font-family: LemonMilk; font-size: 2.3em; font-weight: 700; letter-spacing: 2px; color: #41AB6B;">
                                    SERVER
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid-50">
            <div id="content_box4" style="">
                <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                <div id="mainContent" class="flip-container flip" style="cursor: pointer">
                    <a target="_blank" href="http://blog.amethystlabs.org/existence/what-is-grid/" style="text-decoration: none !important;">
                        <div class="flipper" style="">
                            <div class="back" style="background-color:#333236;">
                                <div style="position: relative; top: 50%; transform: translateY(-50%);">
                                    <img src="../images/img/grid.png" alt="GRID"/>
                                    <br>
                                    <br>
                                    <span style="font-family: LemonMilk; color: #41AB6B; font-size: 3em; letter-spacing: 2px;">More</span>
                                </div>
                            </div>
                            <div class="front" style="background-color:#f2f2f2;">
                                <div style="position: relative; top: 50%; transform: translateY(-50%); font-family: raleway; font-weight: 300; font-size: 1.2em; color: #000;">
                                    <span>Grid is an android application that<br>         </span>
                                    <span>lets you create and connect to a<br></span>
                                    <span>
                                    P2P network which along with a strong AI, optimizes your daily life.It harnesses data in close proximity and in exchange provides instant notifications based on your preferences and style.<br></span>
                                    <br>
                                    <span style="font-family: LemonMilk; color: #41AB6B; font-size: 2.5em; letter-spacing: 2px;">More</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="grid-25">
            <div id="content_box3" style="">
                <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                <div id="mainContent" class="flip-container flip" style="">
                    <div class="flipper" style="">
                        <div class="back" style="background-color:#333236;">
                            <div style="position: relative; top: 50%; transform: translateY(-50%); padding: 15px;">
                                <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em; color: #fff;">
                                    Should I take the Bus or Metro?
                                </p>
                            </div>
                        </div>
                        <div class="front" style="background-color:#f2f2f2;">
                            <div style="position: relative; top: 50%; transform: translateY(-50%);">
                                <span style="font-family: raleway; font-size: 22px; font-weight: 300; letter-spacing: 1px;">
                                    BACKED
                                </span>
                                <span style="font-family: raleway; font-size: 22px; font-weight: 300; letter-spacing: 1px;">
                                    BY AN
                                </span>
                                <span style="font-family: raleway; font-size: 22px; font-weight: 300; letter-spacing: 1px;">
                                    INCREDIBLE
                                </span>
                                <br>
                                <span style="font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                    AI
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="second_screen" class="full_size grid-100">

        <div class="grid-container" style="padding: 0;">
            <div class="grid-100 grid-parent" style="height: 659px;">
                <div class="grid-40" style="height: 659px; padding-top: 60px;">

                    <div id="content_box2" style="top: 35%;">
                        <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                        <div id="mainContent" class="flip-container" style="">
                            <div class="flipper" style="">
                                <div class="front" style="background-color:#333236;">
                                    <div style="position: relative; top: 41%; transform: translateY(-50%);">
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            2.
                                        </h1>
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            LET IT ROLL
                                        </h1>
                                    </div>
                                </div>
                                <div class="back" style="background-color:#f2f2f2;">
                                    <div style="position: relative; top: 49%; transform: translateY(-50%); padding: 15px;">
                                        <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em;">
                                            When finished, the phone will go in a cycling phase. It will keep on switching between Hotspot mode and WiFi on mode.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="grid-20">

                    <div style="position: relative; top: 146.5px;">
                        <div class="hi-icon-wrap hi-icon-effect-1 hi-icon-effect-1a wow animated rotateIn" data-wow-delay="600ms">
				        	<i class='hi-icon fa fa-mobile'></i>
                        </div>
                    </div>
                    <div style="position: relative; top: 288.5px">
                        <div class="hi-icon-wrap hi-icon-effect-1 hi-icon-effect-1a wow animated rotateIn" data-wow-delay="600ms">
      			   	      <i class='hi-icon fa fa-refresh size50'></i>
                        </div>
                    </div>

                </div>

                <div class="grid-40" style="height: 659px; padding-top: 30px;">

                    <div id="content_box2" style="">
                        <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                        <div id="mainContent" class="flip-container" style="">
                            <div class="flipper" style="">
                                <div class="front" style="background-color:#333236;">
                                    <div style="position: relative; top: 41%; transform: translateY(-50%);">
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            1.
                                        </h1>
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            RUN THE APP
                                        </h1>
                                    </div>
                                </div>
                                <div class="back" style="background-color:#f2f2f2;">
                                    <div style="position: relative; top: 49%; transform: translateY(-50%); padding: 15px;">
                                        <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em;">
                                            Start your app. It will download a few plugins which help the app establish a network.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

    <div id="third_screen" class="full_size grid-100">
        <div class="grid-container" style="padding: 0;">
            <div class="grid-100 grid-parent" style="height: 659px;">
                <div class="grid-40" style="height: 659px; padding-top: 60px;">

                    <div id="content_box2" style="top: 35%;">
                        <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                        <div id="mainContent" class="flip-container" style="">
                            <div class="flipper" style="">
                                <div class="front" style="background-color:#333236;">
                                    <div style="position: relative; top: 41%; transform: translateY(-50%);">
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            4.
                                        </h1>
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            OR WIFI
                                        </h1>
                                    </div>
                                </div>
                                <div class="back" style="background-color:#f2f2f2;">
                                    <div style="position: relative; top: 49%; transform: translateY(-50%); padding: 15px;">
                                        <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em;">
                                            If you connect to someone's Hotspot while cycling, your phone will become a node. Bottom line, you are on Grid.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="grid-20">

                    <div style="position: relative; top: 146.5px;">
                        <div class="hi-icon-wrap hi-icon-effect-1 hi-icon-effect-1a wow animated rotateIn" data-wow-delay="600ms">
				        	<i class='hi-icon fa fa-mobile fa-lg'></i>
                        </div>
                    </div>
                    <div style="position: relative; top: 288.5px">
                        <div class="hi-icon-wrap hi-icon-effect-1 hi-icon-effect-1a wow animated rotateIn" data-wow-delay="600ms">
      			   	      <i class='hi-icon fa fa-wifi size45'></i>
                        </div>
                    </div>

                </div>

                <div class="grid-40" style="height: 659px; padding-top: 30px;">

                    <div id="content_box2" style="">
                        <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                        <div id="mainContent" class="flip-container" style="">
                            <div class="flipper" style="">
                                <div class="front" style="background-color:#333236;">
                                    <div style="position: relative; top: 41%; transform: translateY(-50%);">
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            3.
                                        </h1>
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            HOTSPOT
                                        </h1>
                                    </div>
                                </div>
                                <div class="back" style="background-color:#f2f2f2;">
                                    <div style="position: relative; top: 49%; transform: translateY(-50%); padding: 15px;">
                                        <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em;">
                                            If someone connects to you while your phone's Hotspot mode is on then it will act as a router and you will be finally on the Grid.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

    <div id="fourth_screen" class="full_size grid-100">

        <div class="grid-container" style="padding: 0;">
            <div class="grid-100 grid-parent" style="height: 659px;">
                <div class="grid-40" style="height: 659px; padding-top: 60px;">

                    <div id="content_box2" style="top: 35%;">
                        <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                        <div id="mainContent" class="flip-container" style="">
                            <div class="flipper" style="">
                                <div class="front" style="background-color:#333236;">
                                    <div style="position: relative; top: 41%; transform: translateY(-50%);">
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            6.
                                        </h1>
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            MUCH AI
                                        </h1>
                                    </div>
                                </div>
                                <div class="back" style="background-color:#f2f2f2;">
                                    <div style="position: relative; top: 49%; transform: translateY(-50%); padding: 15px;">
                                        <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em;">
                                            The data you generate is used to create a profile of yours which is stored on your phone and your phone only. The app learns from this data and serves you suitable notifications about everything.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="grid-20">

                    <div style="position: relative; top: 146.5px;">
                        <div class="hi-icon-wrap hi-icon-effect-1 hi-icon-effect-1a wow animated rotateIn" data-wow-delay="600ms">
				        	<i class='hi-icon fa fa-bar-chart size45'></i>
                        </div>
                    </div>
                    <div style="position: relative; top: 288.5px">
                        <div class="hi-icon-wrap hi-icon-effect-1 hi-icon-effect-1a wow animated rotateIn" data-wow-delay="600ms">
      			   	      <i class='hi-icon fa fa-lightbulb-o'></i>
                        </div>
                    </div>

                </div>

                <div class="grid-40" style="height: 659px; padding-top: 30px;">

                    <div id="content_box2" style="">
                        <div style="width: 100%; height: 100%; border: 1px solid white; position: absolute"></div>
                        <div id="mainContent" class="flip-container" style="">
                            <div class="flipper" style="">
                                <div class="front" style="background-color:#333236;">
                                    <div style="position: relative; top: 41%; transform: translateY(-50%);">
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2.5em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            5.
                                        </h1>
                                        <h1 style="position: relative; font-family: LemonMilk; font-size: 2em; font-weight: 700; color: #41AB6B; letter-spacing: 2px;">
                                            SUCH DATA
                                        </h1>
                                    </div>
                                </div>
                                <div class="back" style="background-color:#f2f2f2;">
                                    <div style="position: relative; top: 49%; transform: translateY(-50%); padding: 15px;">
                                        <p style="position: relative; font-family: raleway; font-weight: 300; font-size: 1.2em;">
                                            Your phone's sensors generate data and the app shares this data with others on the network. Don't worry, your data is anonymized first. We don't take privacy lightly.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

    <div id="fifth_screen" class="full_size grid-100">
        <div id="queryContainer" class="grid-container" style="position: relative; width: 100%; height: 100%; margin: 0 auto; background-color: rgba(0,0,0,0.9)">
            <div id="status" class="grid-100" style="height: 10%;">
            </div>
            <div class="grid-100 grid-parent" style="height: 80%;">
                <div class="grid-50">
                    <form id="queryForm" method="POST" action="#">
                    </form>
                    <div id="queryBoxParent">
                        <textarea id="queryBox" cols="40" rows="2" onkeypress="return submitForm(event)" onclick = "$(this).html('')" spellcheck="false" name="query" form="queryForm" maxlength="100">Enter your query</textarea>
                        <span id="comment">TYPE IN HERE</span>
                        <div style="position: relative; width: 100%; height: 30%; top: 20%;">
                            <div style="text-align: center; width: 33%; height: 100%; display: inline-block; border-right: 1px solid white; float: left;">
                                <div id="statusBox1">
                                    <h1>25</h1>
                                    <p>Online</p>
                                </div>
                            </div>
                            <div style="text-align: center; width: 33%; height: 100%; display: inline-block; border-right: 1px solid white; float: left">
                                <div id="statusBox2">
                                    <h1>43</h1>
                                    <p>Connected</p>
                                </div>
                            </div>
                            <div style="text-align: center; width: 33%; height: 100%; display: inline-block">
                                <div id="statusBox3">
                                    <h1>7</h1>
                                    <p>Friends</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid-50" style="position: relative; left: 50%;">
                    <div id="queryResult" style="position: relative; background-color: #f2f2f2; top: 67px;">
                        <div class="grid-container" style="height: 100%;">
                            <div class="grid-100" style="height: 70%;width: 100%;padding: 30px;">
                                <div class="resultScreen">
                                    <div class="animated slideInUp" id="type1" style="position: relative"><p style="margin: 0;"><span style="color: #41AB6B;font-family: LemonMilk;font-size: 4em;">43</span> users are connected to you.</p><p style="margin: 0;">among them<span style="color: #41AB6B;font-family: LemonMilk;font-size: 4em;"> 7 </span>are friends.</p></div>
                                </div>
                            </div>


                            <div class="grid-100" style="height: 30%;width: 100%;text-align: center;">
                                <div style="
                                            width: 30%;
                                            border: 3px solid #41AB6B;
                                            margin: 0 auto;
                                            "></div>
                                <p style="
                                        position: relative;
                                        top: 30%;
                                        transform: translateY(-50%);
                                        "><span style="
                                    font-family: raleway;
                                    font-size: 1.3em;
                                    color: #41AB6B;
                                    font-weight: 700;
                                    text-transform: uppercase;
                                    cursor: pointer;
                                    " onclick="return submitForm(event)">Sign Up For Public Beta</span></p>
                                <p style="
                                        font-family: raleway;
                                        font-size: 0.7em;
                                        font-weight: 400;
                                        position: relative;
                                        top: 25px;
                                        ">GRID | THE SMARTEST NETWORK</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<!-- do not touch this -->
<svg id="frontTimeline" class="animated" width="1000" height="500" style="position: absolute; left:0; top: 0;">
</svg>




<!-- PAGE 3 -->

<div id="container_4" class="grid-container animated">



        <div class="grid-100">

            <div class="overlay2">
                <video autoplay loop muted id="bgvid">
                    <source src="../images/video.mp4" type="video/mp4">
                </video>
                <div class="overlay">
                    <div class="pluginsBorder" style="">
                    </div>
                    <a href="#" onclick="closeLightbox()" style="visibility: hidden; position: absolute; top: 0; right: 0;">
                    <div class="icon-container" style="position: relative; float: right; z-index: 1000; padding: 15px;">
                        <span class="ti-close"></span>
                    </div>
                    </a>
                </div>
                <div id="container_preview" class="grid-container" style="padding: 0;">
                    <div id="prev_image" class="grid-100 animated" style="padding: 0; height: 100%; width: 50%; overflow: hidden;">
                    </div>
                    <div id="prev_text" class="grid-100" style="position: absolute; left: 50%; width: 50%; height: 100%;">
                        <div class="text">
                            <p id="Social Network">
                                We haven't decided a name yet, but this plugin will change the way you interact offline. It will offer a seamless experience, you can know more about the people around you, you can instantly know when your friends are near you or you can simply "like" their vacation pictures without caring about Internet connectivity.
                            </p>
                            <p id="Aether">
                                Aether is the www for Grid. Since ours is not a traditional network, we don't have traditional websites. Aether is a framework as well as a plugin. It "hosts" your content on our platform but being p2p, its reach is limited, not. You can seed the content and can increase its reach by acting as a transceiver. When you seed a "website", you become the provider, this also help in crowdsourcing content quality management. The finer the content, the more seeders it will have and more seeders means more reach.
                            </p>
                            <p id="Zeal">
                                Zeal makes the whole radio experience more social. It is a plugin which broadcasts your playlist and allows you to tune in to some one's station. You can imagine it as radio stations popping around you.
                            </p>
                            <p id="Hacknet">
                                Not a final name but it's a game like Ingress, all about hacking.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <h1 id="pluginsPageHeading" class="animated flipInX" data-wow-delay="500ms" data-wow-duration="500ms">
                    PLUGINS
                </h1>
            </div>


                <div class="content">
                    <div class="grid animated" style="z-index: 100">
					<figure class="effect-ming">
						<img src="../images/img/logo9.png" style="" alt="img09"/>
						<figcaption>
							<h2>Social Network</h2>
							<a href="#" onclick="openLightbox()">View more</a>
						</figcaption>
					</figure>
					<figure class="effect-ming">
						<img src="../images/img/logo22.png" alt="img08"/>
						<figcaption>
							<h2>Aether</h2>
							<a href="#" onclick="openLightbox()">View more</a>
						</figcaption>
					</figure>
                    <figure class="effect-ming">
						<img src="../images/img/logo24.png" alt="img09"/>
						<figcaption>
							<h2>Zeal</h2>
							<a href="#" onclick="openLightbox()">View more</a>
						</figcaption>
					</figure>
					<figure class="effect-ming">
						<img src="../images/img/logo11.png" alt="img08"/>
						<figcaption>
							<h2>Hacknet</h2>
							<a href="#" onclick="openLightbox()">View more</a>
						</figcaption>
					</figure>
				    </div>
                </div>



        </div>
</div>



<!-- PAGE 4 -->

<div id="container_4" class="grid-container animated">
    <video autoplay loop muted id="bgvid" class="frontvid">
            <source src="../images/video.mp4" type="video/mp4">
    </video>
    <div id="overlay" class="grid-100 full_size" style="background-color: rgba(255,255,255,0.05); opacity: 0.0; position: absolute">
    </div>

    <div id="mainElem" class="grid-100 full_size" style="opacity: 0.0">

        <div class="grid-container" style="">
            <div id="elpsycongroo" class="grid-100" style="text-align: center;">
                <h1 style="position: relative;">
                    ORIGIN
                </h1>
                <p style="text-align: left;">
                    This idea may seem ahead of its time, because it is. None of us actually thought
of this idea, we were told about it. John Titor, a self proclaimed time traveller,
posted on @channel about the grim dystopian future, to which he belonged, and wanted
to change. In the year 2036, SERN(CERN) takes over the earth and the world goes into complete
anarchy. John believes SERN invented time travel in 2001 itself and used it to transcend
and overthrow all the political institutions. Titor wanted to make Grid, as a tool to connect and learn
about enemy locations but more importantly as a symbol. A symbol of resistance.
<br>
<br>
And now you know that the team is comprised of uber geeks and nerds. We are a Delhi Technological University based
startup and yes, still in college, preparing for exams and doing assignments. This is our first venture although it wasn't
supposed to be a venture at all. But, here we are, not leaving this idea as a mere project or a github repository. Not because
everyone is doing startups and it has gone mainstream but because this idea deserves to be out there, because we believe it
is the future and because we believe we can build it.
<br>
<br>
No we don't have a clich√©d Team page, rather we have an easter egg. All you have to do is ask.

                </p>
            </div>
        </div>

    </div>

</div>



<!-- end -->

<div id="container_0"></div>

<script type="text/javascript">
    $('html,body').css('overflow-y','hidden');
</script>


<!-- main script -->

<script type="text/javascript">

    var views = $('[id=container_4]');
    for( var i = 0 ; i < views.length ; i++ ){
        if(i>0){
            $(views[i]).addClass('slideOutLeft');
        }

    }

    var screenWidth = $(window).width();
    var screenHeight = $(window).height();
    var documentHeight = $(document).height();
    var foot = $('#navSvg');
    var elem = $('#navLabelGroup');

    var gridSvg = $('#frontTimeline');
    gridSvg.attr('width',screenWidth);
    gridSvg.attr('height',documentHeight);
    gridSvg.attr('class','animated slideOutLeft');
    var pluginGrid = $('.grid');
    pluginGrid.addClass('slideOutLeft');

    window.onload = function(){
        var elems = $('#shareIcons');
        var ic = $('#shrIcon');
        $('#shareIcon').on('mouseenter',function(){
            elems.removeClass('flipOutX');
            elems.addClass('flipInX');
            ic.removeClass('flipInX');
            ic.addClass('flipOutX');
        });

        $('#shareIcon').on('mouseleave',function(){
            elems.removeClass('flipInX');
            elems.addClass('flipOutX');
            ic.removeClass('flipOutX');
            ic.addClass('flipInX');
        });
    }

    var pages=['main','grid','plugins','origin'];

    var index=0;
    var currentPage = pages[index];
    var viewport=1;

    document.onkeydown = changePage
    document.onmousemove = handleMouse

    function changeOverflow(value){
        $('html,body').css({'overflow-y':value});
    }

    function handleMouse(event){

        var x = event.pageX;
        var y = event.pageY%screenHeight;
        var rangeX1 = screenWidth/2 - screenWidth/4;
        var rangeX2 = screenWidth/2 + screenWidth/4;
        var rangeY1 = screenHeight - 120;
        var rangeY2 = screenHeight;
        if( viewport == 2 ){
            if( x > rangeX1 && x < rangeX2 && y > rangeY1 && y < rangeY2){
                slideFooter(1);
            }
            else{
                var scroll = $(window).scrollTop()
                if(getCurrentScreen(scroll) < 5){
                    slideFooter(0);
                }
            }
        }
        //add footer svg animation
    }

    function chgClass(value, elem, dir){
        // dir = 0 (left) , dir = 1 (right)
        // value = 0 (out) , value = 1 (in)
        if( dir == 0){
            if(value == 0){
                elem.removeClass('slideInLeft');
                elem.removeClass('slideInRight');
                elem.addClass('slideOutLeft');
            }
            if(value == 1){
                elem.removeClass('slideOutLeft');
                elem.removeClass('slideOutRight');
                elem.addClass('slideInLeft');
            }
        }
        else if( dir == 1){
            if(value == 0){
                elem.removeClass('slideInRight');
                elem.removeClass('slideInLeft');
                elem.addClass('slideOutRight');
            }
            if(value == 1){
                elem.removeClass('slideOutRight');
                elem.removeClass('slideOutLeft');
                elem.addClass('slideInRight');
            }
        }
    }

    var newAnimationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
    function slideFooter(value){
        //value : 0(down)
        var foot = $('#navSvg');
        var elem = $('#navLabelGroup');
        if(value == 0){
            if( foot.attr('class').split(' ').indexOf('slideInUp') != -1 ){
                        foot.attr('class','animated slideOutDown');
                        elem.attr('class','animated slideOutDown');
                }
        }
        else{
            if( foot.attr('class').split(' ').indexOf('slideOutDown') != -1 ){
                        foot.attr('class','animated slideInUp');
                        elem.attr('class','animated slideInUp').css('opacity','1');
                }
        }
    }

    var flag = false;
    var flag2 = false;
    var f1 = false;
    var f2_front = false;
    var f2_back = false;
    var f3_front = false;
    var f3_back = false;
    var f4 = false;

    function AnimatePage(from,to){
        // 12 possibilities
        switch(from){
                case 0: switch(to){
                        case 1: f1 = false;
                                    chgClass(0,$(views[index]),0);
                                    // for viewport 1 animation
                                    document.onkeydown = null;
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f1){
                                            chgClass(1,$(views[index+1]),1);
                                            if(!flag){
                                                gridSvg.attr('class','animated slideInRight').one(newAnimationEnd,function(){
                                                    gridPage();
                                                    setTimeout(function(){
                                                        document.onkeydown = changePage;
                                                    },1000);
                                                });
                                                flag = true;
                                            }
                                            else{
                                                gridSvg.attr('class','animated slideInRight');
                                            }

                                            changeOverflow('visible');
                                            index++;
                                            f1 = true;
                                            viewport = 2;
                                            slideFooter(0);
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                    });
                        break;
                        case 2: f1 = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),0);
                                    // for viewport 2 animation
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f1){
                                            chgClass(1,$(views[index+2]),1);
                                            chgClass(1,$('.grid'),1)
                                            changeOverflow('hidden');
                                            index+=2;
                                            f1 = true;
                                            slideFooter(1);
                                            viewport = 3;
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                    });
                        break;
                        case 3: f1 = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),0);
                                    // for viewport 3 grid animation
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f1){
                                            chgClass(1,$(views[index+3]),1);
                                            if(!flag2){
                                                origin();
                                                flag2 = true;
                                            }
                                            changeOverflow('hidden');
                                            index+=3;
                                            f1 = true;
                                            viewport = 4;
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                    });
                        break;
                }
                break;
                case 1: switch(to){
                        case 0: $('html, body').animate({scrollTop : 0},{
                                        'duration': 300,
                                        'easing': 'linear',
                                        'complete': function(){
                                            f2_back = false;
                                            document.onkeydown = null;
                                            chgClass(0,$(views[index]),1);
                                            gridSvg.attr('class','animated slideOutRight');
                                            // for viewport 2 animation
                                            $(views[index]).one(newAnimationEnd,function(){
                                                if(!f2_back){
                                                    chgClass(1,$(views[index-1]),0);
                                                    changeOverflow('hidden');
                                                    index--;
                                                    f2_back = true;
                                                    slideFooter(1);
                                                    viewport = 1;
                                                }
                                                setTimeout(function(){
                                                    document.onkeydown = changePage;
                                                },1000);
                                            });
                                        }
                                    });
                        break;
                        case 2: $('html, body').animate({scrollTop : 0},{
                                        'duration': 300,
                                        'easing': 'linear',
                                        'complete': function(){
                                            f2_front = false;
                                            document.onkeydown = null;
                                            gridSvg.attr('class','animated slideOutLeft');
                                            chgClass(0,$(views[index]),0);
                                            // for viewport 2 animation
                                            $(views[index]).one(newAnimationEnd,function(){
                                                if(!f2_front){
                                                    chgClass(1,$(views[index+1]),1);
                                                    chgClass(1,$('.grid'),1)
                                                    changeOverflow('hidden');
                                                    index++;
                                                    f2_front = true;
                                                    slideFooter(1);
                                                    viewport = 3;
                                                }
                                                setTimeout(function(){
                                                    document.onkeydown = changePage;
                                                },1000);
                                            });
                                        }
                                    });
                        break;
                        case 3: $('html, body').animate({scrollTop : 0},{
                                        'duration': 300,
                                        'easing': 'linear',
                                        'complete': function(){
                                            f2_front = false;
                                            document.onkeydown = null;
                                            gridSvg.attr('class','animated slideOutLeft');
                                            chgClass(0,$(views[index]),0);
                                            // for viewport 2 animation
                                            $(views[index]).one(newAnimationEnd,function(){
                                                if(!f2_front){
                                                    chgClass(1,$(views[index+2]),1);
                                                    if(!flag2){
                                                        origin();
                                                        flag2 = true;
                                                    }
                                                    changeOverflow('hidden');
                                                    index+=2;
                                                    f2_front = true;
                                                    slideFooter(1);
                                                    viewport = 4;
                                                }
                                                setTimeout(function(){
                                                    document.onkeydown = changePage;
                                                },1000);
                                            });
                                        }
                                    });
                        break;
                }
                break;
                case 2: switch(to){
                        case 0: slideFooter(1);
                                    f3_back = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),1);
                                    chgClass(0,$('.grid'),1);
                                    // for viewport 2 animation
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f3_back){
                                            chgClass(1,$(views[index-2]),0);
                                            changeOverflow('hidden');
                                            index-=2;
                                            f3_back = true;
                                            viewport = 1;
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                    });
                        break;
                        case 1: f3_back = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),1);
                                    chgClass(0,$('.grid'),1);
                                    console.log('this should alsp run')
                                    // for viewport 3 grid animation
                                    $('.grid').one(newAnimationEnd,function(){
                                        if(!f3_back){
                                            console.log('this should run')
                                            chgClass(1,$(views[index-1]),0);
                                            if(!flag){
                                                gridSvg.attr('class','animated slideInLeft').one(newAnimationEnd,function(){
                                                    gridPage();
                                                    setTimeout(function(){
                                                        document.onkeydown = changePage;
                                                    },1000);
                                                });
                                                flag = true;
                                            }
                                            else{
                                                gridSvg.attr('class','animated slideInLeft');
                                            }
                                            changeOverflow('visible');
                                            index--;
                                            f3_back = true;
                                            viewport = 2;
                                            slideFooter(0);
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                    });
                        break;
                        case 3: slideFooter(1);
                                    f3_front = false;
                                    document.onkeydown = null;
                                    chgClass(0,$('.grid'),0);
                                    chgClass(0,$(views[index]),0);
                                    // for viewport 3 grid animation
                                    $('.grid').one(newAnimationEnd,function(){
                                        if(!f3_front){
                                            chgClass(1,$(views[index+1]),1);
                                            if(!flag2){
                                                origin();
                                                flag2 = true;
                                            }
                                            changeOverflow('hidden');
                                            index++;
                                            f3_front = true;
                                            viewport = 4;
                                            console.log('viewport',viewport)
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                    });
                        break;
                }
                break;
                case 3: switch(to){
                        case 0: slideFooter(1);
                                    f4 = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),1);
                                    // for viewport 4 animation
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f4){
                                            chgClass(1,$(views[index-3]),0);
                                            changeOverflow('hidden');
                                            index-=3;
                                            f4 = true;
                                            viewport = 1;
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                        console.log('viewport',viewport)
                                    });
                        break;
                        case 1: f4 = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),1);
                                    // for viewport 4 animation
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f4){
                                            console.log('this should run')
                                            chgClass(1,$(views[index-2]),0);
                                            if(!flag){
                                                gridSvg.attr('class','animated slideInLeft').one(newAnimationEnd,function(){
                                                    gridPage();
                                                    setTimeout(function(){
                                                        document.onkeydown = changePage;
                                                    },1000);
                                                });
                                                flag = true;
                                            }
                                            else{
                                                gridSvg.attr('class','animated slideInLeft');
                                            }
                                            changeOverflow('visible');
                                            index-=2;
                                            f4 = true;
                                            viewport = 2;
                                            slideFooter(0);
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                        console.log('viewport',viewport)
                                    });
                        break;
                        case 2: slideFooter(1);
                                    f4 = false;
                                    document.onkeydown = null;
                                    chgClass(0,$(views[index]),1);
                                    // for viewport 4 animation
                                    $(views[index]).one(newAnimationEnd,function(){
                                        if(!f4){
                                            chgClass(1,$(views[index-1]),0);
                                            chgClass(1,$('.grid'),0);
                                            changeOverflow('hidden');
                                            index--;
                                            f4 = true;
                                            console.log('hello');
                                            viewport = 3;
                                        }
                                        setTimeout(function(){
                                            document.onkeydown = changePage;
                                        },1000);
                                        console.log('viewport',viewport)
                                    });
                        break;
                }
                break;
        }
        console.log(index);
    }

    function changePage(e,selectedElem,clickedElem){
        var anim;
        // right 39 , left 37
        if(e.type == 'keydown'){
            var keys = {39 : 1, 37: 1}
            if( String(e.keyCode) == String(39) ){
                if(index == 0){
                    anim = true;
                }
                else{
                    anim = false;
                }
                if( index < 3 ){
                    var el = getElem(index+1);
                    clickEventHandler(el);
                    switch(index){
                            case 0: AnimatePage(0,1);
                                    break;
                            case 1: AnimatePage(1,2);
                                    break;
                            case 2: AnimatePage(2,3);
                                    break;
                    }
                }
            }
            else if( String(e.keyCode) == String(37) ){
                if(index == 2){
                    anim = true;
                }
                else{
                    anim = false;
                }
                if( index > 0 ){
                    var el = getElem(index-1);
                    clickEventHandler(el);
                    switch(index){
                            case 1: AnimatePage(1,0)
                                    break;
                            case 2: AnimatePage(2,1);
                                    break;
                            case 3: AnimatePage(3,2);
                                    break;
                    }
                }
            }
        }
        else if(e.type == 'click'){
            console.log(selectedElem,clickedElem);
            AnimatePage(selectedElem,clickedElem);
            if(clickedElem == 1){
                anim = true;
            }
            else{
                anim = false;
            }
        }

        if(anim == true){
            $('.ba').removeClass('flipOutX');
            $('.ba').addClass('flipInX');
            $('.fr').removeClass('flipInX');
            $('.fr').addClass('flipOutX');
        }
        else if(anim == false){
            $('.ba').removeClass('flipInX');
            $('.ba').addClass('flipOutX');
            $('.fr').removeClass('flipOutX');
            $('.fr').addClass('flipInX');
        }
    }

    //stuff related to grid page

    //styling last page
    var queryResult = $('#queryResult');
    var queryBoxParent = $('#queryBoxParent');

    queryResult.css({
        'width': queryBoxParent.css('width'),
        'height': queryBoxParent.css('height'),
    });


    var position = $(window).scrollTop()
    var logoScreen = $('#logo_screen');
    var firstScreen = $('#first_screen');
    var secondScreen = $('#second_screen');
    var thirdScreen = $('#third_screen');
    var fourthScreen = $('#fourth_screen');
    var fifthScreen = $('#fifth_screen');
    var timeout;
    var positions = []
    positions.push(logoScreen.position().top);
    positions.push(firstScreen.position().top);
    positions.push(secondScreen.position().top);
    positions.push(thirdScreen.position().top);
    positions.push(fourthScreen.position().top);
    positions.push(fifthScreen.position().top);
    var greyColor = "#333236";
    var greenDark = "#41AB6B";
    var whiteColor = "#fff";
    var closeToW = "#f2f2f2";
    var loop = [];
    var looplength = [];
    var line = [];
    var visitedViewports = [];
    var lastScreenNo = 5;



    var svgAnim = function(i,j,loop,looplength,line,duration,callback){
        Snap.animate(0,looplength[i][j],function(step){
                line[i][j].attr({
                    path: Snap.path.getSubpath(loop[i][j],0,step),
                })
        },duration,callback);
        return ;
    }

    var svgAnimate = function(viewport,callback){

        var screenWidth = $(window).width();
        var screenHeight = $(window).height();
        var snapSvg0 = Snap("#frontTimeline");
        snapSvg0.attr({
            fill: "none",
            stroke: "#fff",
            strokeWidth: 1,
            strokeDasharray: "10 10",
        });


        // viewport 1
        var contentBox3 = $('[id=content_box3]');
        var contentBox4 = $('#content_box4');
        var temp = $(contentBox3[0]).children().eq(0);
        var x1 = temp.offset().left+temp.width();
        var y1 = temp.offset().top+temp.height()/2;
        temp = $(contentBox3[1]).children().eq(0);
        var x4 = temp.offset().left;
        var y4 = temp.offset().top+temp.height()/2;
        temp = $(contentBox4).children().eq(0);
        var x2 = temp.offset().left;
        var y2 = temp.offset().top+temp.height()/2;
        var x3 = x2 + temp.width();
        var y3 = y2;
        temp = $(contentBox4).children().eq(0);
        var x5 = temp.offset().left+temp.width()/2;
        var y5 = temp.offset().top+temp.height();
        var duration = 500;



        loop.push(["M"+x1+" "+y1+" L"+x2+" "+y2,"M"+x3+" "+y3+" L"+x4+" "+y4,"M"+x5+" "+y5+" L"+x5+" "+screenHeight]);
        looplength.push([x2-x1,x4-x3,screenHeight-y5]);
        line.push([snapSvg0.path({
            path: Snap.path.getSubpath(loop[0][0],0,0),
        }),snapSvg0.path({
            path: Snap.path.getSubpath(loop[0][1],0,0),
        }),snapSvg0.path({
            path: Snap.path.getSubpath(loop[0][2],0,0),
        })
                  ]);

        //viewport 2,3,4
        var contentBox2 = $('[id=content_box2]');
        var iter = 0;
        for( var i = 0 ; i < contentBox2.length; i+=2){

            var temp = $(contentBox2[i]).children().eq(0);
            var temp1 = $(contentBox2[i+1]).children().eq(0);
            x1 = screenWidth/2;
            y1 = temp.offset().top+temp.height()/2;
            x2 = temp.offset().left+temp.width();
            x3 = temp1.offset().left;
            y2 = temp1.offset().top+temp.height()/2;



            loop.push(["M"+x1+" "+y1+" "+x2+" "+y1,"M"+x1+" "+y2+" L"+x3+" "+y2,"M"+x5+" "+(iter+1)*screenHeight+" L"+x5+" "+(iter+2)*screenHeight])
            looplength.push([Math.abs(x2-x1),Math.abs(x3-x1),screenHeight]);
            line.push([snapSvg0.path({
                path: Snap.path.getSubpath(loop[iter][0],0,0),
            }),snapSvg0.path({
                path: Snap.path.getSubpath(loop[iter][1],0,0),
            }),snapSvg0.path({
                path: Snap.path.getSubpath(loop[iter][2],0,0),
            })
                      ]);
            iter += 1;

        }

        //viewport 5
        /*
        loop.push(["M"+x5+" "+4*screenHeight+" L"+x5+" "+5*screenHeight])
        looplength.push([screenHeight]);
        line.push([snapSvg0.path({
            path: Snap.path.getSubpath(loop[4][0],0,0),
            strokeDasharray: "0 0"
        })]);
        */


        //viewport 6
        /*
        loop.push(["M"+x5+" "+5*screenHeight+" L"+x5+" "+6*screenHeight,"M"+x5+" "+5*screenHeight+" L"+x5+" "+6*screenHeight])
        looplength.push([screenHeight,screenHeight]);
        line.push([snapSvg0.path({
            path: Snap.path.getSubpath(loop[5][0],0,0),
            strokeDasharray: "0 0"
        }),snapSvg0.path({
            path: Snap.path.getSubpath(loop[5][0],0,0),
            strokeDasharray: "0 0"
        })]);
        */

        //animation
        //give viewport name
        for( var j = 0 ; j < looplength[viewport-1].length; j++){
            svgAnim(viewport-1,j,loop,looplength,line,duration,callback);
        }

    }




    var gridPage = function(){

        $(window).scroll(function() {
            if(typeof timeout == "number") {
                window.clearTimeout(timeout);
                delete timeout;
            }
            timeout = window.setTimeout( handleScroll, 100);
        });

        var elements = $('.flip-container:in-viewport');
        for( var i = 0; i < elements.length; i++){
            if( $(elements[i]).hasClass('flip') == true ){
                elements[i].classList.toggle('flip');
            }
            else{
                continue;
            }
        }


        if ( String(elements[0]) != 'undefined' )
        if( $(elements[0]).hasClass('flip') == false ){
            svgAnimate(1);
            visitedViewports.push(1);
        }



    }

    var gridSystem = function(){
        var foot = $('#navSvg');
        var elem = $('#navLabelGroup');
        setTimeout(function(){
            foot.attr('class','animated slideInUp');
            elem.attr('class','animated slideInUp');
        },1000);
    }


    var handleScroll = function(){

            /*
            var elements = $('.flip-container:in-viewport');
            for( var i = 0; i < elements.length; i++){
                if( $(elements[i]).hasClass('flip') == true ){
                    elements[i].classList.toggle('flip');
                }
                else{
                    continue;
                }
            }
            */

            slideFooter(0);
            var scroll = $(window).scrollTop()

            AnimOps = {
                duration: 500,
                easing: "easeInOutSine",
                queue: false,
            }

            if( scroll > position){
                var screenNo = getCurrentScreen(scroll);
                // go to screenNo + 1
                var newOps = $.extend(
                AnimOps,
                {
                    complete: function(){
                        enableScroll();
                        document.onkeydown = changePage;
                        position = $(window).scrollTop();

                        if( visitedViewports.indexOf(screenNo+1) == -1){
                            visitedViewports.push(screenNo+1);
                            if( screenNo+1 == 6){
                                var callback = function(){

                                }
                                svgAnimate(screenNo+1,callback)
                            }
                            else{
                                svgAnimate(screenNo+1);
                            }
                        }

                        if(screenNo+1 >= lastScreenNo){
                            gridSystem();
                        }
                    }
                },
                {
                    start: function(){
                        disableScroll();
                    }
                }
                )

                $('body').animate({
                    scrollTop: positions[screenNo+1]
                },newOps)

            }
            else if(scroll < position){

                var screenNo = getCurrentScreen(scroll);
                var newOps = $.extend(
                AnimOps,
                {
                    complete: function(){
                        enableScroll();
                        document.onkeydown = changePage;
                        position = $(window).scrollTop();

                        if(screenNo == 1){
                            var elements = $('.flip-container:in-viewport');
                            for( var i = 0; i < elements.length; i++){
                                if( $(elements[i]).hasClass('flip') == true ){
                                    elements[i].classList.toggle('flip');
                                }
                                else{
                                    continue;
                                }
                            }
                        }

                        if( visitedViewports.indexOf(screenNo) == -1){
                            visitedViewports.push(screenNo);
                            if( screenNo == 6){
                                var callback = function(){
                                }
                                svgAnimate(screenNo,callback);
                            }
                            else{
                                svgAnimate(screenNo);
                            }
                        }

                    }
                },
                {
                    start: function(){
                    disableScroll();
                    }
                }
                )
                // go to screenNo
                $('body').animate({
                    scrollTop: positions[screenNo]
                },newOps)
            }


        }


    scroll < positions[2]

    var getCurrentScreen = function(scroll){
            if(scroll < positions[2]){
                return 1;
            }
            else if( scroll < positions[3]){
                return 2;
            }
            else if(scroll < positions[4]){
                return 3;
            }
            else if(scroll < positions[5]){
                return 4;
            }
            else if(scroll < positions[6]){
                return 5;
            }
            else{
                return 6;
            }

        }


    // enabling and disabling scroll functions


    var keys = {37: 1, 38: 1, 39: 1, 40: 1};

    function preventDefault(e) {
        e = e || window.event;
        if (e.preventDefault)
            e.preventDefault();
        e.returnValue = false;
    }


    function preventDefaultForScrollKeys(e) {
    if (keys[e.keyCode]) {
        preventDefault(e);
        changePage(e);
        return false;
        }
    }


    function disableScroll() {
    if (window.addEventListener) // older FF
        window.addEventListener('DOMMouseScroll', preventDefault, false);
    window.onwheel = preventDefault; // modern standard
    window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE
    window.ontouchmove  = preventDefault; // mobile
    document.onkeydown  = preventDefaultForScrollKeys;
    }


    function enableScroll() {
    if (window.removeEventListener)
        window.removeEventListener('DOMMouseScroll', preventDefault, false);
    window.onmousewheel = document.onmousewheel = null;
    window.onwheel = null;
    window.ontouchmove = null;
    document.onkeydown = null;
    }
    //end


    //functions related to plugins page


    var elem = $('.overlay2');
    var closeButton = $('.overlay > a');
    var lightTextP = $('.text > p');
    var lightTexth = $('#pluginsPageHeading');
    var iter = 0;
    closeButton.css('visibility','visible');
    closeButton.toggle();

    var grid = $('.grid');
    var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';

    var preview = $('.overlay2');
    var left = preview.css('left');
    var topd = preview.css('top');
    var width = preview.css('width');
    var height = preview.css('height');
    var borderH,borderwidth,borderBorderR,borderTop;
    var borders = $('.pluginsBorder');
    var closeButtonDuration = 400;
    var gridDuration = 400;
    var borderDuration = 500;

    var openLightbox = function(e){

        active = $(event.target).parents().eq(1);
        var heading = active.children().eq(1).children().eq(0).text();
        lightTexth.removeClass('flipInX');
        lightTexth.addClass('flipOutX');
        lightTexth.one(animationEnd,function(){
            lightTexth.html(heading);
            lightTexth.removeClass('flipOutX');
            lightTexth.addClass('flipInX');
        })

        lightTextP.each(function(index){
            if($(this).attr('id') == heading){
                iter = index;
            }
        });

        grid.children().addClass('animated zoomOut');

        var prev_image = $('#prev_image');
        var prev_text = $('#prev_text');

        var preview = $('.overlay2');
        /*
        var foot = $('#navSvg');
        var elem = $('#navLabelGroup')
        foot.attr('class','animated slideOutDown');
        elem.attr('class','animated slideOutDown');
        */

        preview.animate({
            width: "80%",
            height: height
            },{
            duration: gridDuration,
            easing: "easeInQuart",
            queue: true,
            start: function(){
                    borderH = borders.css('height');
                    borderTop = borders.css('top');
                    borderBorderR = borders.css('border-right');
                    borders.animate({
                        height: "0px",
                    },{
                        duration: 500,
                        easing: "easeOutQuart",
                        queue: true,
                    });
                },
            complete: function(){
                closeButton.toggle({
                    duration: closeButtonDuration,
                    easing: "linear",
                });
                var image = active.children().eq(0).clone();
                
                image.addClass('animated slideInLeft');
                image.css({
                    'animation-duration': '500ms',
                    '-webkit-animation-duration': '500ms',
                    '-ms-animation-duration': '500ms',
                    '-moz-animation-duration': '500ms',
                    '-o-animation-duration': '500ms',
                });
                prev_image.append(image);
                image.css({
                    'position':'relative',
                    'max-width':'none',
                    'left':'-25%',
                    'height':'100%'
                });
                /*
                console.log("before staement")
                prev_image.addClass('slideInLeft');
                prev_image.css({
                    'animation-duration': '500ms',
                    '-webkit-animation-duration': '500ms',
                    '-ms-animation-duration': '500ms',
                    '-moz-animation-duration': '500ms',
                    '-o-animation-duration': '500ms',
                });
                console.log("after statement")
                */
                $(lightTextP[iter]).css('visibility','visible');
                $(lightTextP[iter]).removeClass('fadeOut');
                $(lightTextP[iter]).css({'-webkit-animation-delay':'500ms','animation-delay':'500ms'});
                $(lightTextP[iter]).addClass('animated fadeIn');
                },
             }
        );

        //set the position

    }

    var closeLightbox = function(){

        //reverting the changes
        console.log("entered func")
        var preview = $('.overlay2');
        var prev_image = $('#prev_image > img');
        var prev_text = $('#prev_text').children().eq(0);

        closeButton.toggle();

        prev_image.removeClass('slideInLeft');

        $(lightTextP[iter]).removeClass('fadeIn');
        $(lightTextP[iter]).addClass('animated fadeOut');
        $(lightTextP[iter]).css({'-webkit-animation-delay':'10ms','animation-delay':'10ms'});
        lightTexth.removeClass('flipInX');
        lightTexth.addClass('flipOutX');
        lightTexth.one(animationEnd,function(){
            lightTexth.html('PLUGINS');
            lightTexth.removeClass('flipOutX');
            lightTexth.addClass('flipInX');
        })

        iter = 0;
        console.log("before func")
        prev_image.addClass('slideOutLeft').one(animationEnd,function(){
            preview.animate({
            left: left,
            width: width,
            },{
            duration: 600,
            easing: "easeInQuart",
            queue: true,
            complete: function(){
                borders.animate({
            height: borderH,
        },{
            duration: borderDuration,
            easing: "easeOutQuart",
            queue: true,
            }
        );
                grid.children().removeClass('animated zoomOut');
                grid.children().addClass('animated zoomIn');
                prev_image.remove();
                var foot = $('#navSvg');
                var elem = $('#navLabelGroup')
                foot.attr('class','animated slideInUp');
                elem.attr('class','animated slideInUp');
                prev_image.removeClass('slideOutLeft');
                }
             }
            );
        });

    }
    
    var overlayTop = $('.overlay2').position()['top'];
    $(window).on('resize load',function(){
        var overlay2 = $('.overlay2');
        var windowHeight = $(window).height();
        var overlay2Height = overlay2.height();
        var positionOverlay = ( windowHeight - overlay2Height )/2;
        var topDiff = Math.abs(overlayTop - positionOverlay)
        overlay2.css('top',positionOverlay+'px')
        
        $('.content > .grid').css('top',topDiff+'px')
        console.log(topDiff)
        /*
        var cC = $($('.effect-ming')[0])
        cCH = (parseFloat(cC.css('margin').split('px')[0])*2 + cC.height())*2
        var marginB = (overlay2Height - cCH)/2 - overlay2Height
        overlay2.css('margin-bottom',marginB+'px')
        */
    });








    //functions related to origin page

    var origin = function(){

        var elem1 = $('#elpsycongroo > h1');
        var elem2 = $('#elpsycongroo > p');

        $({blurRadius: 0}).animate({blurRadius: 10}, {
        duration: 100,
        easing: 'swing',
        step: function() {
            $('.frontvid').css({
                //"-webkit-filter": "blur("+this.blurRadius+"px)",
                //"filter": "blur("+this.blurRadius+"px)"
            });
            },
        complete: function(){
            $('#mainElem').css({opacity: 0.0}).animate({opacity: 1.0},1000,'swing');
            $('#elpsycongroo > h1').addClass('animated flipInX').css({
                '-webkit-animation-duration':'500ms',
                'animation-duration':'500ms',
                '-webkit-animation-delay': '1s',
                'animation-delay': '1s',
            });
        }
        });
        $('#overlay').css({opacity: 0.0}).animate({opacity: 1.0},1000,'swing');

    }

    //functions related to query page

    var queries = {
        '*': [2,'This query can\'t be made.'],
        '|': [2,'Thankyou for signing up'],
        'Sign Up for public beta': [2,'Type your email and press Enter.'],
        'Cats are glorious':[3,'Noted, you like cats'],
        'But dogs are better':[3,'So you like dogs more'],
        'Extract information from the captive held in the trunk of the car':[4,'Calling',911],
        'Find me a coffeehouse which has the least crowd and also has at least 2 charging points along with wifi':[2,'Go straight 25m, then turn right. That starbucks meets the conditions.'],
        'grep founders origin.txt':[2,'https://goo.gl/XyMHHD'],
        'Hack into this terminal and give me all its content':[4,'Calling',911],
        'Identify all the points on this road which are prone to traffic jam':[5,'Analyzing....',3,'points identified'],
        'I need to get [here] but without jostling, find me the route':[3,'Routing...'],
        'Kill time':[2, 'That is exactly what you are doing right now.'],
        'Launch "Zeal"':[2,'Press right arrow key'],
        'Monitor the metro train\'s speed and alert me when it reaches 30KMPH':[3,'Will do'],
        'Notify me when the crowd outside [this] club gets below 50':[2,'It\'s already 46.'],
        'And now I am on the outside':[2,'You like Ellie goulding?'],
        'Point out the anomalies in this set of data which is about arrival times of [this] bus':[1,42,'anomalies detected','Most of them are around',8,'PM'],
        'Quantum physics is weird. I thought it was easy but when I looked, it changed':[2,'I see what you did there.'],
        'rm -rf /':[2,'Needs sudo access'],
        'Transformers armada was a good cartoon':[3,'Hell yes'],
        'Underwoods are murderers':[3,'No, they are survivors'],
        'V for?':[2,'This visage, no mere veneer of vanity, is a vestige of the ‚Äúvox populi‚Äù now vacant, vanished.'],
        'What\'s the distribution of the population around [this] area?':[1,34,'people are near [this] stall', 'and',55, 'are outside [this] one.'],
        '*yawns*':[2,'Hey I am NOT boring!'],
        'Find me my Zen':[4,'The answer is always ',42],
        'Broadcast around me: "I have an extra ticket. Any one interested in buying?"':[2,'One replied with "How much?"'],
        'All the ATMs around me':[1,23,'ATMs around you.','The nearest one is',34,'meters away.'],
    }

    var templates = {
        1 : ' <div class="animated slideInUp" id="type1" style="position: relative"><p style="margin: 0;"><span style="color: #41AB6B;font-family: LemonMilk;font-size: 4em;">%d</span> %s</p><p style="margin: 0;">%s<span style="color: #41AB6B;font-family: LemonMilk;font-size: 4em;"> %d </span>%s</p></div>',
        2 : ' <div class="animated slideInUp" id="type2" style="position: relative;"><p style="font-size: 2em">%s</p></div>',
        3 : ' <div class="animated slideInUp" id="type2" style="position: relative;"><p style="font-size: 3em">%s</p></div>',
        4 : ' <div class="animated slideInUp" id="type1" style="position: relative"><p style="margin: 0;font-size: 2em">%s<span style="color: #41AB6B;font-family: LemonMilk;font-size: 4em;">%d</span></p></div>',
        5 : ' <div class="animated slideInUp" id="type1" style="position: relative"><p style="margin: 0;">%s<span style="color: #41AB6B;font-family: LemonMilk;font-size: 4em;">%d</span>%s</p></div>'
    }

    var map = {
        'a': 'All the ATMs around me',
        'b': 'Broadcast around me: "I have an extra ticket. Any one interested in buying?"',
        'c': 'Cats are glorious',
        'd': 'But dogs are better',
        'e': 'Extract information from the captive held in the trunk of the car',
        'f': 'Find me a coffeehouse which has the least crowd and also has at least 2 charging points along with wifi',
        'g': 'grep founders origin.txt',
        'h': 'Hack into this terminal and give me all its content',
        'i': 'Identify all the points on this road which are prone to traffic jam',
        'j': 'I need to get [here] but without jostling, find me the route',
        'k': 'Kill time',
        'l': 'Launch "Zeal"',
        'm': 'Monitor the metro train\'s speed and alert me when it reaches 30KMPH',
        'n': 'Notify me when the crowd outside [this] club gets below 50',
        'o': 'And now I am on the outside',
        'p': 'Point out the anomalies in this set of data which is about arrival times of [this] bus',
        'q': 'Quantum physics is weird. I thought it was easy but when I looked, it changed',
        'r': 'rm -rf /',
        's': 'Sign Up for public beta',
        't': 'Transformers armada was a good cartoon',
        'u': 'Underwoods are murderers',
        'v': 'V for?',
        'w': 'What\'s the distribution of the population around [this] area?',
        'y': '*yawns*',
        'z': 'Find me my Zen'
    }
    map.x=map.e;

    var currentQuery = "";
    var signUpflag = false;
    function submitForm(event){

        var textArea = $('textarea');

        if(event.keyCode == 13){
            textArea.blur();
            var text;
            if(currentQuery.length != 0){
                text = textArea[0].value;
                if(text.length < parseInt(textArea.attr('maxlength'))){
                    textArea[0].value = currentQuery;
                }
                textArea[0].value = "";
            }
            else{
                textArea[0].value = "";
                if(!signUpflag)
                    currentQuery = "*";
                else{
                    currentQuery = "|"
                    signUpflag = false;
                }
            }
            if(currentQuery == map['s']){
                signUpflag = true;
            }

            textArea.attr('maxlength','100');
            var value = queries[currentQuery];
            var template = templates[value[0]];
            if(text != currentQuery)
              value = [2,'Please complete the query']
            for( var i = 1 ; i < value.length ; i++){
                if( typeof(value[i]) == "number"){
                    template = template.replace("%d",value[i]);
                }
                else if( typeof(value[i]) == "string"){
                    template = template.replace("%s",value[i]);
                }
            }
            var toAppend = template;
            if($('.resultScreen > div').length != 0){
                $('.resultScreen > div').removeClass('animated slideInUp').addClass('animated slideOutUp').one(newAnimationEnd,function(){
                    $('.resultScreen').html(toAppend);
                });
            }
            else{
                $('.resultScreen').html(toAppend);
            }
            currentQuery = "";
        }
        else if(event.type != 'click' && !signUpflag){
            var text = textArea[0].value;
            if(text != ""){
                if(text.length == 1){
                    var toFill = map[text[0].toLowerCase()];
                    if(toFill != undefined){
                        currentQuery = toFill;
                        textArea.attr('maxlength',currentQuery.length);
                        textArea[0].value = currentQuery[0];
                    }
                    else{
                        currentQuery = "";
                    }
                }
                else{
                    if(currentQuery.length != 0){
                        textArea[0].value = text.slice(0,-1) + currentQuery.split(text.slice(0,-1))[1][0];
                    }
                }
            }
        }

        if(event.type == 'click'){
            var value = queries[map['s']];
            var template = templates[value[0]];
            for( var i = 1 ; i < value.length ; i++){
                if( typeof(value[i]) == "number"){
                    template = template.replace("%d",value[i]);
                }
                else if( typeof(value[i]) == "string"){
                    template = template.replace("%s",value[i]);
                }
            }
            var toAppend = template;

            if($('.resultScreen > div').length != 0){
                $('.resultScreen > div').removeClass('animated slideInUp').addClass('animated slideOutUp').one(newAnimationEnd,function(){
                    $('.resultScreen').html(toAppend);
                });
            }
            else{
                $('.resultScreen').html(toAppend);
            }

            signUpflag = true;
            textArea[0].value = "";
            currentQuery = "";
        }
    }

</script>
